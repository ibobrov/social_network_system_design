# System Design социальной сети для курса по System Design

#### Функциональные требования:

- список мест для путешествий
- публикация постов из путешествий с фотографиями, небольшим описанием и привязкой к конкретному месту путешествия;
- оценка (лайки) и комментарии постов других путешественников;
- подписка на других путешественников, чтобы следить за их активностью;
- поиск популярных мест для путешествий и просмотр постов с этих мест;
- просмотр ленты других путешественников и ленты пользователя, основанной на подписках в обратном хронологическом порядке;

#### Нефункциональные требования:

- DAU 10 000 000;
- availability 99,95%;
- latency 1-2 sec;
- храним посты, подписки, коментарии бесконечно;
- только в СНГ аудитория;

#### Базовые расчеты

RPS (публикация постов)
```
DAU = 10 000 000
Каждый пользователь делает 3 поста в неделю
RPS = 10 000 000 / 86 400 / 7 * 3 ~= 50
```

RPS (просмотр постов)
```
DAU = 10 000 000
В среднем пользователь просматривает ленту 2 раза в день, по 20 постов (будем отдавать сразу 20 постов если в ленте).
А переходит по ссылке (не через ленту) на пост 3 раза в день
RPS просмотр ленты батчем = 10 000 000 / 86 400 / * 2 ~= 230
RPS просмотр поста = 10 000 000 / 86 400 / * 3 ~= 350
```

#### Необходимая память

```
1. В посте могут быть 6 фотографий до 2мб (сжимаем на клиенте, возмем среднее значение = 3 фотографии по 1 мб);
3. Описание поста может быть не более 500 символов, в среднем 100 символов расчитываем (символ считаем в UTF-16);
3. В среднем под постом 15 комментариев не более 200 символов (усредняем до 50 символов в UTF-16);
4. Храним копии данных, значит умножаем на 2 кол-во данных.

Средний вес одного поста = (3 * 1MB) + (100 * 4KB) + (15 * 50 * 4KB) = 3MB + 400KB + 3000KB = 6,32MB
Необходимая память в год = 10 000 000 * 52 * 3 * 6,32MB = 9859200000MB ~= 9.1PB * 2 (реплики) = 18.2PB
```
